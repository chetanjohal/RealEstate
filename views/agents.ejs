<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agent</title>
    <link rel="stylesheet" href="/fa17g01/assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/fa17g01/assets/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Alfa+Slab+One">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Cookie">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Rubik">
    <link rel="stylesheet" href="/fa17g01/assets/css/Contact-Form-Clean.css">
    <link rel="stylesheet" href="/fa17g01/assets/css/dannyStyle.css">
    <link rel="stylesheet" href="/fa17g01/assets/css/Login-Form-Clean.css">
    <link rel="stylesheet" href="/fa17g01/assets/css/Navigation-Clean1.css">
    <link rel="stylesheet" href="/fa17g01/assets/css/Pretty-Footer.css">
    <link rel="stylesheet" href="/fa17g01/assets/css/Pretty-Search-Form.css">
    <link rel="stylesheet" href="/fa17g01/assets/css/Registration-Form-with-Photo.css">
    <link rel="stylesheet" href="/fa17g01/assets/css/styles.css">
    <link rel="stylesheet" href="/fa17g01/assets/css/News-Cards.css">
    <script src="/fa17g01/assets/js/dropzone.js"></script>
    <meta charset="UTF-8">
    <title>Pure css popup box</title>
    <link rel='stylesheet prefetch'
          href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css'>
</head>

<body>
<div>
    <div class="disclaimer" style="background-color:#43c59e;height:24px;">
        <p class="text-center warning" style="margin-bottom:0px;color:rgb(255,255,255);margin-top:0px;padding-top:2px;">
            SFSU Software Engineering Project, Fall 2017. For Demonstration Only</p>
    </div>
    <nav class="navbar navbar-default navigation-clean" style="background-color:#003459;height:73px;">
        <div class="container">
            <div class="navbar-header"><a class="navbar-brand" href="/fa17g01/"
                                          style="color:#ffffff;font-family:Cookie, cursive;line-height:19px;font-size:33px;font-weight:normal;">Unlock </a>
                <button class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navcol-1"><span
                            class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span
                            class="icon-bar"></span><span class="icon-bar"></span></button>
            </div>
            <div class="collapse navbar-collapse  col-sm-9 col-md-9" id="navcol-1">
                <form class="navbar-form" action="/fa17g01/search">
                    <div class="input-group">
                        <div class="input-group-btn">
                            <div class="dropdown btn-group" role="group">
                                <button class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                                        aria-expanded="false"
                                        type="button">City <span class="caret"></span></button>
                                <ul class="dropdown-menu" role="menu">
                                    <% if (cities) { for(var j = 0; j < cities.length; j++){ %>
                                    <li role="presentation"><a
                                                href="/fa17g01/search?word=<%= cities[j].city %>"><%= cities[j].city %></a>
                                    </li>
                                    <% }} %>
                                </ul>
                            </div>
                            <div class="dropdown btn-group" role="group">
                                <button class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                                        aria-expanded="false"
                                        type="button">Zip code<span class="caret"></span></button>
                                <ul class="dropdown-menu" role="menu">
                                    <% if (zips) { for(var i = 0; i < zips.length; i++){ %>
                                    <li role="presentation"><a
                                                href="/fa17g01/search?word=<%= zips[i].zip %>"><%= zips[i].zip %></a>
                                    </li>
                                    <% }} %>
                                </ul>
                            </div>
                        </div>
                        <input class="form-control search bar" type="text" placeholder="City, zip, street"
                               maxlength="40"
                               name="word">
                        <div class="input-group-btn">
                            <button class="btn btn-success" type="submit">Search</button>
                        </div>
                    </div>
                </form>
            </div>
            <div class="collapse navbar-collapse" id="navcol-1">
                <ul class="nav navbar-nav navbar-right">
                    <li role="presentation"><a href="/fa17g01/about/" class="active nav menu" style="color:#ffffff;">About
                            us</a></li>

                    <% if ( user.username) { %>
                    <% if ( user.isAgent ) { %>
                    <li role="presentation"><a href="/fa17g01/agent/" class="active nav menu" style="color:#ffffff;">Dashboard</a>
                    </li>
                    <% } %>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                           data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="color:#ffffff;">
                            Hi <%= user.username %>
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="/fa17g01/logout/">Logout</a>
                        </div>
                    </li>
                    <% } else { %>
                    <li role="presentation"><a href="/fa17g01/login/" class="active nav menu" style="color:#ffffff;">Log
                            in</a></li>
                    <li role="presentation"><a href="/fa17g01/registration/" class="active nav menu"
                                               style="color:#ffffff;">Sign Up</a></li>
                    <% } %>
                </ul>
            </div>
        </div>
    </nav>
</div>
<div>
    <div>
        <div class="container inbox">
            <div>
                <ul class="nav nav-tabs">
                    <li class="active"><a href="#tab-1" role="tab" data-toggle="tab">House Listing</a></li>
                    <li><a href="#tab-2" role="tab" data-toggle="tab">Add new house</a></li>
                </ul>
                <div class="tab-content">
                    <div class="tab-pane active" role="tabpanel" id="tab-1">
                        <% for(var i = 0; i < houses.length; i++){ %>
                        <% var source = "data:image/png;base64," + houses[i].img; %>
                        <% var hrefHouseId = "/fa17g01/house/" + houses[i].house_id; %>
                        <figure class="snip1527">
                            <div class="image"><a href="<%= hrefHouseId %>"><img src="<%= source %>"/></a></div>
                            <figcaption>
                                <div>
                                    <form method="post" action="/fa17g01/house/<%= houses[i].house_id %>/delete/">
                                        <button type="submit" class="delete"><span>Delete</span></button>
                                    </form>
                                </div>
                                <h4>$<%= houses[i].price %></h4>
                                <p>
                                    <%= houses[i].street %>, <%= houses[i].zip %> <%= houses[i].city %>
                                </p>
                            </figcaption>

                        </figure>
                        <% } %>
                    </div>
                    <div class="tab-pane" role="tabpanel" id="tab-2">
                        <form id="newHouse" method="post" action="/fa17g01/house/new/" class="dropzone" enctype="multipart/form-data">
                            <p>Please fill in the information for the new house</p>
                            <div class="row">

                                <div class="col-md-6">
                                    <div>
										<label class="dashboardlabel">Street</label>
										<input type="text" name="street" id="street" class="dashboardtextfield" placeholder=" ex: 123 example street">
									</div>
									<div>
										<label class="dashboardlabel">Zip Code</label>
										<input type="text" type="number" name="zip" id="zip" class="dashboardtextfield" placeholder=" ex: 98765">
									</div>
									<div>
										<label class="dashboardlabel">City</label>
										<input type="text" name="city" id="city" class="dashboardtextfield" placeholder=" ex: San Francisco">
									</div>
									<div>
										<label class="dashboardlabel">Price</label>
										<input type="number"  name="price" id="price" class="dashboardtextfield" placeholder=" ex: $123456">
									</div>
									<div>
										<label class="dashboardlabel">Description</label>
										<input type="text" name="description" id="description" class="dashboardtextfield" placeholder=" ex: great house! with plenty of space">
									</div>
									<div>
										<label class="dashboardlabel">Bedrooms</label>
										<input type="number"  name="bedrooms" id="bedrooms" class="dashboardtextfield" placeholder=" Please enter number of Bedrooms">
									</div>
									<div>
										<label class="dashboardlabel">Baths</label>
										<input type="number" name="baths" id="baths" class="dashboardtextfield" placeholder=" Please enter number of Baths">
									</div>

                                </div>
                                <div class="col-md-6">

                                    <div>
										<label class="dashboardlabel">Backyard</label>
										<input type="number" name="backyard" id="backyard" class="dashboardtextfield" placeholder=" Please enter number of Backyard">
									</div>
									<div>
										<label class="dashboardlabel">Pool</label>
										<input type="number" name="pool" id="pool" class="dashboardtextfield" placeholder=" Please enter number of pool">
									</div>
									<div>
										<label class="dashboardlabel">AC</label>
										<input type="number" name="ac" id="ac" class="dashboardtextfield" placeholder=" Please enter number of AC">
									</div>
									<div>
										<label class="dashboardlabel">Heater</label>
										<input type="number" name="heater" id="heater" class="dashboardtextfield" placeholder=" Please enter number of Heater">
									</div>
									<div>
										<label class="dashboardlabel">Year</label>
										<input type="number" name="yr" id="yr" class="dashboardtextfield" placeholder=" Enter Year">
									</div>
									<div>
										<label class="dashboardlabel">Lot</label>
										<input type="number" name="lot" id="lot" class="dashboardtextfield" placeholder=" Enter size of the land">
									</div>
                                    <!--
                                                                    <button class="btn btn-default" type="file" style="margin-top:5px;margin-bottom:20px;">Upload picture</button>
                                    -->
                                    <input type="file" name="photo" id="photo"
                                           accept="image/x-png,image/gif,image/jpeg" multiple>Upload
                                    picture</input>
                                </div>

                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <button class="btn btn-default" id="mSubmit" type="submit">Add new house</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<footer style="background-color:#003459;padding-top:55px;margin-top:-22px;padding-left:40px;">
    <div class="container">
        <div class="row">
            <div class="col-md-4 col-sm-6 footer-navigation">
                <h3><a href="/fa17g01/">Unlock</a></h3>
                <p class="links"><a href="/fa17g01/">Home</a><strong> · </strong><a
                            href="https://sfsuse.com/fa17g01/about/">About</a><strong> · </strong><a
                            href="/fa17g01/registration/"> Sign-Up</a><strong> </strong></p>
                <p class="company-name">Unlock © 2017 </p>
            </div>
            <div class="col-md-4 col-sm-6 footer-contacts">
                <div><span class="fa fa-map-marker footer-contacts-icon"> </span>
                    <p><span class="new-line-span">1600 Holloway Ave</span> San Franscisco, CA 94132</p>
                </div>
                <div><i class="fa fa-phone footer-contacts-icon"></i>
                    <p class="footer-center-info email text-left"> 123456789</p>
                </div>
            </div>
            <div class="clearfix visible-sm-block"></div>
            <div class="col-md-4 footer-about">
                <h4>About the company</h4>
                <p style="color:rgb(255,255,255);"> Six students from San Francisco State University that gets
                    together
                    to create a real estate website that provides houses. </p>

            </div>
        </div>
    </div>
</footer>
<script src="/fa17g01/assets/js/jquery.min.js"></script>
<script src="/fa17g01/assets/bootstrap/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.17.0/jquery.validate.min.js"></script>
<script>

    $(document).ready(function () {
        $('#newHouse').validate({
            rules: {
                description: {
                    required: true
                },
                ac: {
                    required: true
                },
                heater: {
                    required: true
                },
                price: {
                    required: true
                },
                yr: {
                    required: true
                },
                street: {
                    required: true
                },
                city: {
                    required: true
                },
                lot: {
                    required: true
                },
                pool: {
                    required: true
                },
                backyard: {
                    required: true
                },
                baths: {
                    required: true
                },
                bedrooms: {
                    required: true
                }
            }
        });


      /*  $('#newHouse').on('submit', 'form', function (e) {
            e.preventDefault();
            //check whether browser fully supports all File API
            if (window.File && window.FileReader && window.FileList && window.Blob) {
                //get the file size and file type from file input field
                var fsize = $('#photo')[0].files[0].size;

                if (fsize > 2726297) //do something if file size more than 2.6 mb
                {
                    alert(fsize + " bites\nToo big!");
                    $('#photo').val(' ');

                }
                else{
                    console.log("ok");
                    $( "#newHouse" ).submit();
                }
            } else {
                alert("Please upgrade your browser, because your current browser lacks some new features we need!");

            }
        });*/
    });

    function submit_form() {
        if (window.File && window.FileReader && window.FileList && window.Blob) {
            //get the file size and file type from file input field
            var fsize = $('#photo')[0].files[0].size;

            if (fsize > 2726297) //do something if file size more than 2.6 mb
            {
                alert(fsize + " bites\nToo big!");
                $('#photo').val(' ');
                returnToPreviousPage();
            }
            else{
                console.log("ok");
                $("#newHouse").submit();
            }
        } else {
            alert("Please upgrade your browser, because your current browser lacks some new features we need!");
            returnToPreviousPage();
        }
    }


</script>
</body>

</html>
